<h1> Page </h1>

<%= "#{@user.first_name} #{@user.last_name}" %> <br />

<% unless @user == current_user %>

  <% if current_user.friends.include?(@user) %>
    <%= link_to "Remove Friend", friend_request_path(:id => @user[:id]), :method => :delete %>

  <% elsif current_user.requesting_friendships.include?(@user) %>
    <%= link_to "Accept Request", friend_request_path(:id => @user[:id]), :method => :put %>

  <% elsif current_user.pending_friendships.include?(@user) %>
    <%= form_for(current_user.friend_requests.find_by(:friend_id => @user[:id]), :html => { :method => :delete }) do |f| %>
      <%= f.submit "Cancel Request" %>
    <% end %>

  <% else %>
    <%= form_for(current_user.friend_requests.build) do |f| %>
      <%= f.hidden_field :friend_id, :value => @user[:id] %>
      <%= f.submit "Add Friend" %>
    <% end %>

  <% end %>

<% end %>

<br />

<%= link_to "Sign Out", destroy_user_session_path(current_user), :method => :delete %>
