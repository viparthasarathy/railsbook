<% @users.each do |user|%>

  <%= link_to "#{user.first_name} #{user.last_name}", user %>

  <% unless user == current_user %>


    <% if current_user.friends.include?(user) %>
      <%= render 'shared/remove_friend', object: user %>

    <% elsif current_user.requesting_friendships.include?(user) %>
      <%= render 'shared/incoming_request', object: user %>

    <% elsif current_user.pending_friendships.include?(user) %>
      <%= render 'shared/cancel_request', object: user %>

    <% else %>
      <%= render 'shared/add_friend', object: user %>

    <% end %>

  <% end %>

<% end %>

